# 訊號說明表

| **訊號名稱**         | **位元寬度**   | **描述**                                                                                      |
|----------------------|----------------|----------------------------------------------------------------------------------------------|
| `clk`               | 1-bit          | 時鐘訊號，用於驅動所有同步操作，例如 FIFO 的讀取、寫入以及 GShare 表的更新。                    |
| `rst`               | 1-bit          | 重置訊號，將所有狀態初始化為已知狀態，包括 `history` 和 GShare 表的清零。                      |
| `flush`             | 1-bit          | 清空訊號，當預測錯誤或需要重新初始化管線時，清空 FIFO 和相關數據。                              |
| `pc`                | 32-bit         | 程式計數器，表示當前指令的地址，用於計算 GShare 表的索引（`gshare_idx`）。                      |
| `valid`             | 1-bit          | 表示當前指令是否為有效的分支或跳躍指令，供分支預測邏輯使用。                                   |
| `jump_valid1`       | 1-bit          | 表示第一級跳躍預測是否有效，用於分支預測的條件計算中。                                         |
| `jump_valid2`       | 1-bit          | 表示第二級跳躍預測是否有效，用於進一步確認分支預測是否可用。                                   |
| `imem_resp`         | 1-bit          | 表示來自指令記憶體的響應是否有效，用於確保分支預測有合法的指令輸入。                            |
| `bp_ready`          | 1-bit          | 表示分支預測器是否準備好，控制 FIFO 的讀取和數據更新操作。                                     |
| `commit_br_pc`      | 32-bit         | 提交分支指令時的程式計數器（PC），用於更新分支預測數據或在預測錯誤時恢復正確的 PC 地址。         |
| `commit_br_en`      | 1-bit          | 表示實際執行的分支是否採用（1 表示採用，0 表示未採用），用於更新分支歷史和 GShare 表。           |
| `commit_opcode`     | 7-bit          | 指令碼，表示當前提交的指令類型是否為分支（`op_br`）或跳躍（`op_jal`, `op_jalr`）。               |
| `taken`             | 1-bit          | 分支預測器的輸出，表示當前的分支是否被預測為採用（1 表示採用）。                               |
| `mispredict`        | 1-bit          | 表示當分支的實際結果與預測結果不符時，設為 1，用於標記預測錯誤並觸發管線恢復機制。               |
| `recover_pc`        | 32-bit         | 當發生預測錯誤時需要恢復的正確程式計數器（PC），用於恢復到正確的執行地址。                      |
| `full`              | 1-bit          | 表示 FIFO 是否已滿，若滿則無法寫入新的分支預測結果。                                            |
| `empty`             | 1-bit          | 表示 FIFO 是否為空，若空則無法從中讀取分支預測結果。                                            |
| `history`           | 5-bit          | 分支歷史紀錄，用於記錄最近 5 次分支的採用（1）或未採用（0）結果，幫助預測未來分支行為模式。       |
| `GShare`            | 32 × 2-bit     | GShare 表格，每個項目是一個 2-bit 飽和計數器，用於追蹤特定分支的採用或未採用趨勢。               |
| `gshare_idx`        | 5-bit          | GShare 的索引，由 `pc[6:2]` 計算得出，用於訪問 GShare 表的特定表項。                             |
| `gshare_out`        | 5-bit          | 從 FIFO 中讀取的 GShare 表索引，用於提交分支時更新對應的 GShare 表項。                          |
| `pc_out`            | 32-bit         | 從 FIFO 中讀取的程式計數器值，用於檢查分支預測結果或恢復預測錯誤的地址。                        |
| `taken_out`         | 1-bit          | 從 FIFO 中讀取的預測結果，表示當時預測分支是否為採用（1 表示採用）。                            |
| `readEn`            | 1-bit          | FIFO 的讀取使能訊號，允許分支預測結果從 FIFO 中被讀取。                                         |
| `writeEn`           | 1-bit          | FIFO 的寫入使能訊號，允許新的分支預測結果寫入 FIFO 中。                                          |
| `wrPtr`             | 5-bit          | FIFO 的寫入指標，指向下一個可寫入的位置。                                                       |
| `rdPtr`             | 5-bit          | FIFO 的讀取指標，指向下一個可讀取的位置。                                                       |
